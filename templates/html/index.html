{{ define "index" }}
<!doctype html>
<html lang="en">
  <head>
    <title>GitHub Graph Drawer</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/resources/favicon.png" />
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- GitHub star repo button -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>

    <!-- IBM Plex Mono Font. -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,200;0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              IBMPlexMono: ["IBM Plex Mono", "monospace"],
            },
            colors: {
              nilCell: "#121212",
              emptyCell: "#161b22",
              occupied1: "#0e4429",
              occupied2: "#006d32",
              occupied3: "#26a641",
              occupied4: "#39d353",
            },
          },
        },
      };
    </script>
  </head>

  <body
    style="
      background-color: #121212;
      height: 100dvh;
      font-family: &quot;IBM Plex Mono&quot;, monospace;
    "
  >
    {{ template "header" }}
    <!-- {{ template "action_button" .RedPillButton }} {{
     template "action_button" .BluePillButton }} -->

    <form
      class="m-1"
      hx-get="/contribution-graph"
      hx-swap="innerHTML"
      hx-target="#graph"
      hx-trigger="keyup"
    >
      <input
        class="p-1 bg-[#343434] text-white w-72 rounded-md border border-[#121212]"
        type="text"
        id="msg"
        name="msg"
        placeholder="Type to get htmx busy!"
        autocomplete="off"
        maxlength="17"
      />
      <a
        id="download-script"
        download
        class="bg-[#efefef] rounded-md border border-[#121212] hover:bg-[#121212] hover:text-[#efefef] hover:border-[#efefef] cursor-pointer text-[#121212] p-1 font-bold"
      >
        Download Script
      </a>
    </form>

    <div id="graph"></div>
    <script>
      const downloadLink = document.getElementById("download-script");
      document.getElementById("msg").addEventListener("keyup", (e) => {
        const msg = e.target.value;
        downloadLink.href = "/generate-script?msg=" + msg;
        downloadLink.download = `Draw "${msg}" on github graph script.sh`;
      });
    </script>
  </body>
</html>
{{ end }}
